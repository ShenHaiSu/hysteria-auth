import{s as y}from"./index-BMnoWLTH.js";import{a as p}from"./index-BVYfK-K8.js";import{u as _}from"./node-XxXxMLNn.js";import{u as v}from"./configDownload-DBEnllgD.js";import{i as g,G as C,H as k,a as h,c as b,o,w as d,b as n,e as t,p as i,d as w,F as S,A as D,g as B,v as c,l as u}from"./index-CurZRE90.js";import"./node-rrHiEOCh.js";import"./user-Bfv-Uxkn.js";const N={key:0,class:"flex justify-center p-4"},$={key:1,class:"text-center p-4 text-surface-500"},j={key:2,class:"space-y-2"},V={class:"flex flex-col"},F={class:"font-medium text-sm"},L={class:"text-xs text-surface-400"},T={key:0,class:"text-center text-xs text-surface-400 mt-2"},z={class:"mt-4 flex justify-end"},J=g({__name:"QuickConfig",setup(A){const r=_(),f=v(),a=C();async function m(l){try{const e=await f.generateSingleConfig(l);if(!e){a.add({severity:"error",summary:"失败",detail:"生成配置链接失败",life:1e3});return}await navigator.clipboard.writeText(e),a.add({severity:"success",summary:"成功",detail:"配置链接已复制到剪贴板",life:1e3})}catch(e){console.error("复制失败:",e),a.add({severity:"error",summary:"失败",detail:"复制失败，请手动复制",life:1e3})}}return k(()=>{r.proxyConfigs.length===0&&r.fetchProxyConfigs()}),(l,e)=>{const x=h("tooltip");return o(),b(i(y),{class:"h-full"},{title:d(()=>[...e[1]||(e[1]=[t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-bolt text-primary"}),t("span",null,"快速配置")],-1)])]),content:d(()=>[i(r).loading?(o(),n("div",N,[...e[2]||(e[2]=[t("i",{class:"pi pi-spin pi-spinner text-2xl"},null,-1)])])):i(r).proxyConfigs.length===0?(o(),n("div",$,[...e[3]||(e[3]=[t("i",{class:"pi pi-inbox text-4xl mb-2"},null,-1),t("p",null,"暂无可用配置",-1)])])):(o(),n("div",j,[(o(!0),n(S,null,D(i(r).proxyConfigs.slice(0,5),s=>(o(),n("div",{key:s.ip_address+s.proxy_port,class:"flex items-center justify-between p-2 hover:bg-surface-50 rounded border border-surface-200 transition-colors"},[t("div",V,[t("span",F,c(s.server_group),1),t("span",L,c(s.domain||s.ip_address)+":"+c(s.proxy_port),1)]),B(u(i(p),{icon:"pi pi-copy",onClick:E=>m(s)},null,8,["onClick"]),[[x,"复制配置链接"]])]))),128)),i(r).proxyConfigs.length>5?(o(),n("div",T," 更多配置请前往配置页面查看 ")):w("",!0)])),t("div",z,[u(i(p),{label:"查看全部",icon:"pi pi-list",size:"small",text:"",onClick:e[0]||(e[0]=s=>l.$router.push("/config-download"))})])]),_:1})}}});export{J as default};
